<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSI Enterprise Dashboard - Agent Task Management</title>
    <meta name="description" content="TSI Enterprise Dashboard - Floor-by-floor agent hierarchy, task management, performance grading">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>&#x1F4CA;</text></svg>">
</head>
<body>
    <div id="dash-loading" class="dash-loading">
        <h1>TSI DASHBOARD</h1>
        <p>Loading Enterprise Data...</p>
        <div class="dash-loading-bar">
            <div class="dash-loading-bar-fill" id="dash-loading-fill"></div>
        </div>
    </div>

    <div id="dashboard-root"></div>

    <script>
        window.addEventListener('error', function(e) {
            console.error('[Dashboard] ERROR:', e.message, '@', e.filename, ':', e.lineno);
        });
        window.addEventListener('unhandledrejection', function(e) {
            console.error('[Dashboard] PROMISE:', e.reason);
        });

        async function bootDashboard() {
            try {
                const { DashboardApp } = await import('./js/core/DashboardApp.js?v=4');
                const root = document.getElementById('dashboard-root');
                const app = new DashboardApp(root);
                window.dashboard = app;
                await app.init();
                console.log('[Dashboard] TSI Enterprise Dashboard initialized');
            } catch (err) {
                console.error('[Dashboard] Boot failed:', err);
                const loading = document.getElementById('dash-loading');
                if (loading) {
                    const p = loading.querySelector('p');
                    if (p) { p.textContent = 'Error: ' + (err.message || err); p.style.color = '#e74c3c'; }
                }
            }
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', bootDashboard);
        } else {
            bootDashboard();
        }
    </script>
</body>
</html>
