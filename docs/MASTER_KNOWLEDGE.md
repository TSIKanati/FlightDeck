# MASTER KNOWLEDGE - Universal Agent Reference
**Version:** 1.0.0
**Generated:** 2026-02-05
**Generated By:** Claude Opus 4.5 (claude-opus-4-5-20251101)
**Location:** Windows Server - C:\inetpub\vhosts\

---

## SYSTEM HARDWARE & ENVIRONMENT

### Server Specifications
| Component | Specification |
|-----------|---------------|
| **CPU** | AMD EPYC Processor (8 vCPUs) |
| **RAM** | 32GB (33,553,888 KB) |
| **GPU** | None (Microsoft Basic Display Adapter) |
| **OS** | Windows Server |
| **Runtime** | Node.js v24.11.1 LTS |
| **Package Managers** | npm v10.9.2, pnpm v10.28.2 |

### Directory Structure
```
C:\inetpub\vhosts\
├── machinistzen.com/           # Main hub - GitHub connected
│   ├── IMS.Machinistzen.com/   # Submodule - Enterprise IMS
│   ├── docs/                   # THIS knowledge base location
│   └── httpdocs/               # Web root
├── urbot.net/                  # Multi-subdomain education platform
│   ├── Alchemist.URBot.net/
│   ├── Industrialize.URBot.net/
│   ├── Lifelong.URBot.net/
│   ├── Medic.URBot.net/
│   ├── PeerPower.URBot.net/
│   ├── PersonalTrainer.URBot.net/
│   ├── Professor.URBot.net/
│   ├── Secure.URBot.net/
│   └── University.URBot.net/
├── charitypats.com/            # Charity ecosystem (11 subdomains)
├── translatorseries.com/       # Translator platform
├── clieair.com/                # Legal/rights platform
├── ideallearning.net/          # Learning platform
├── quantumledgerbookkeeping.com/
├── realworldprizes.com/
├── autozen.com/
├── transyndicate.com/
├── sally.ims.machinistzen.com/
└── shared-assets/              # Cross-project resources
```

### Standard Path Convention
- **Project Root:** `C:\inetpub\vhosts\{domain.com}\`
- **Web Root:** `{project}\httpdocs\`
- **Documentation:** `{project}\httpdocs\docs\` OR `{project}\docs\`
- **Server Code:** `{project}\httpdocs\server\`
- **API Routes:** `{project}\httpdocs\server\routes\`

---

## AGENT IDENTIFICATION

### This Document Generated By
- **Model:** Claude Opus 4.5 (claude-opus-4-5-20251101)
- **Context:** Claude Code CLI on Windows Server
- **Role:** Primary orchestration and complex reasoning
- **Capabilities:** Multi-file implementation, architecture design, code review authority

### Active Agent Network
| Agent | Model/Platform | Location | Specialty |
|-------|---------------|----------|-----------|
| **Claude (Server)** | Opus 4.5 | Windows Server | Orchestration, complex reasoning |
| **Qwen** | qwen2.5-coder:14b | Local LLM | Autonomous code generation |
| **Copilot** | GitHub Copilot | VS Code | Real-time completion, theme enforcement |
| **Gemini** | Gemini API | Proxy service | Content/design generation |
| **BeeFrank** | Telegram Bot | @BeeFranknBot | Command & control interface |
| **Sally** | Clawdbot | VPS 72.167.227.50 | Remote deployment, production sync |

### Agent Task Ranges
- 501-600: Enterprise architecture (Clawd)
- 591-650: Real-time features, UI polish (Copilot)
- 591-700: Code-intensive features (Qwen)
- 611-660: Design, content, visual work (Gemini)
- 631-730: Complex algorithms, ML, refactoring (Claude)
- 801-850: Orchestration, monitoring (BeeFrank)
- 851-900: VPS deployment, remote ops (Sally)

---

## CRITICAL CODE PATTERNS

### 1. Authentication (MANDATORY)
```javascript
// ALL V4+ routes MUST have authentication
import { authenticateToken, requireRole } from "../middleware/auth.js";

// Apply to router
router.use(authenticateToken);

// Role-based protection for sensitive operations
router.post("/admin-action", requireRole(["admin", "owner"]), async (req, res) => {
  // Protected logic
});
```

### 2. ES Modules ONLY (No CommonJS)
```javascript
// CORRECT - ESM syntax
import express from "express";
import pg from "pg";
const { Pool } = pg;
export default router;

// WRONG - NEVER use CommonJS
// const express = require("express");  // NO!
// module.exports = router;              // NO!
```

### 3. Database Connection Pattern
```javascript
import pg from "pg";
const { Pool } = pg;

const pool = new Pool({
  host: process.env.DB_HOST || "localhost",
  port: process.env.DB_PORT || 5432,
  database: process.env.DB_NAME || "project_db",
  user: process.env.DB_USER || "postgres",
  password: process.env.DB_PASSWORD,
});

export default pool;
```

### 4. Standard Error Handling
```javascript
router.get("/resource", async (req, res) => {
  try {
    const result = await pool.query("SELECT * FROM table");
    res.json({ success: true, data: result.rows });
  } catch (err) {
    console.error("[MODULE_NAME] Operation error:", err);
    res.status(500).json({ success: false, error: "User-friendly message" });
  }
});
```

### 5. File Header Convention
```javascript
/**
 * Module Name - Brief Description
 * TASK-XXX: Related task number
 * Author: Agent Name (Claude, Qwen, Copilot, etc.)
 * Created: YYYY-MM-DD
 * Updated: YYYY-MM-DD - Change description
 * SECURED: All routes require JWT authentication
 */
```

### 6. API Response Format
```javascript
// Success response
res.json({ success: true, data: result });
res.json({ success: true, message: "Operation completed" });

// Error response
res.status(400).json({ success: false, error: "Validation failed" });
res.status(401).json({ success: false, error: "Authentication required" });
res.status(403).json({ success: false, error: "Access denied" });
res.status(404).json({ success: false, error: "Resource not found" });
res.status(500).json({ success: false, error: "Internal server error" });
```

### 7. Null-Safe Access
```javascript
// Always use optional chaining
const userId = req.user?.id;
const role = req.user?.role?.toLowerCase();
const value = req.body?.nested?.property;

// Defensive checks before operations
if (!userId) {
  return res.status(401).json({ success: false, error: "Not authenticated" });
}
```

### 8. React/TypeScript Patterns
```typescript
// Interface definition
export interface ResourceData {
  id: string;
  name: string;
  status: "active" | "inactive" | "pending";
  metadata?: Record<string, unknown>;
}

// Memoized callbacks
const handleAction = useCallback((id: string) => {
  // Handler logic
}, [dependencies]);

// Memoized computations
const computedValue = useMemo(() => {
  return expensiveCalculation(data);
}, [data]);
```

---

## GIT WORKFLOW STANDARDS

### Branch Naming Convention
```
feature/TASK-XXX-description    # New features
bugfix/TASK-XXX-description     # Bug fixes
hotfix/critical-issue           # Emergency production fixes
docs/update-description         # Documentation only
refactor/description            # Code refactoring
test/add-coverage               # Test additions
chore/maintenance               # Maintenance tasks
```

### Commit Message Format (Conventional Commits)
```
<type>(<scope>): <short summary>

<detailed description if needed>

TASK-XXX
Co-Authored-By: Agent Name <noreply@anthropic.com>
```

**Types:** feat, fix, docs, style, refactor, test, chore, perf

### Pull Request Checklist
- [ ] Branch name matches convention
- [ ] Commit messages follow conventional commits
- [ ] All CI checks pass (lint, build, test)
- [ ] Self-review completed
- [ ] PR description includes TASK references
- [ ] < 500 lines changed (when possible)
- [ ] Screenshots for UI changes
- [ ] No merge conflicts

### Code Review Checklist
- [ ] ESM syntax (import/export)
- [ ] All routes have authenticateToken
- [ ] Error handling with try/catch
- [ ] No hardcoded secrets/credentials
- [ ] Console logs with [MODULE] prefix
- [ ] Null checks on req.user, req.body
- [ ] TypeScript interfaces for complex objects

---

## PROJECT INVENTORY

### Active Projects (Git Connected)
| Domain | Status | Git | Technology | Has /docs |
|--------|--------|-----|------------|-----------|
| machinistzen.com | ACTIVE | YES | Node.js, Python, TypeScript | YES |
| IMS.Machinistzen.com | ACTIVE | Submodule | Node.js, PostgreSQL, React | YES |
| clieair.com | ACTIVE | YES | Node.js, Docker | YES |
| charitypats.com | ACTIVE | YES | Node.js, Flask, Docker | NO |
| ideallearning.net | ACTIVE | YES | Node.js | NO |

### Projects Needing Git Init
| Domain | Status | Technology | Priority |
|--------|--------|------------|----------|
| translatorseries.com | ACTIVE | Node.js, Python, MySQL | HIGH |
| urbot.net | SKELETON | ASP.NET templates | MEDIUM |
| quantumledgerbookkeeping.com | ACTIVE | Node.js | MEDIUM |
| realworldprizes.com | ACTIVE | Node.js | MEDIUM |
| autozen.com | SKELETON | None | LOW |
| transyndicate.com | SKELETON | None | LOW |

### URBot.net Subdomain Suite
All currently placeholder/template sites ready for development:
- Alchemist.URBot.net
- Industrialize.URBot.net
- Lifelong.URBot.net
- Medic.URBot.net
- PeerPower.URBot.net
- PersonalTrainer.URBot.net
- Professor.URBot.net
- Secure.URBot.net
- University.URBot.net

---

## MULTI-AGENT COORDINATION

### Autonomous Task Flow
1. **Task Creation:** TASK_MASTER_LIST.md contains all tasks with skill requirements
2. **Queue Distribution:** Separate queue files per agent (copilot_tasks.md, claude_tasks.md, etc.)
3. **Auto-Claiming:** Agents claim from assigned task ranges
4. **Execution:** Agent completes work, commits with signature
5. **Verification:** REVIEWER loop checks PR status every 60 seconds
6. **Coordination:** COORDINATOR loop maintains queues every 2 minutes

### Telegram Command Interface (@BeeFranknBot)
```
/status     - Show system status
/teams      - List active agents
/task <id>  - Check task status
/claim <id> - Force task claim
/restart    - Restart agent
/logs       - View agent logs
/alert      - Send system alert
```

### Production Deployment (Sally Agent)
- **VPS Host:** 72.167.227.50:18789
- **Sync Method:** FTP/SFTP via TSIKanati3
- **Production URL:** ims.machinistzen.com
- **SSL:** Wildcard certificate (*.machinistzen.com)

---

## PERSISTENT MEMORY FILES

### Required in Every Project's /docs Folder
| File | Purpose | Update Frequency |
|------|---------|------------------|
| MASTER_KNOWLEDGE.md | This file - universal reference | On discovery |
| TASK_QUEUE.md | Current active tasks | Every 2 minutes |
| PROGRESS_REPORT.md | Status and metrics | Every session |
| SESSION_SUMMARY.md | Session recap | End of session |
| QWEN_LEARNING_FEEDBACK.md | Code patterns learned | On correction |

### Knowledge Sync Protocol
1. **Source of Truth:** machinistzen.com/docs/MASTER_KNOWLEDGE.md
2. **Mirror To:** All project /docs folders
3. **Update Trigger:** Any significant pattern discovery
4. **Sync Method:** Copy to all projects, update local notes
5. **No Cross-Pollination:** Project-specific details stay in project

---

## IMS-SPECIFIC KNOWLEDGE

### Machine Fleet (24 machines)
**Mills (12):** MACH-01 to MACH-14 (Haas VF-1, VF-2SS, UMC 500SS, UMC 750, Okuma GENOS M560-V)
**Lathes (6):** LATHE-01 to LATHE-06 (Citizen L32, Okuma MULTUS B250 II, LB3000 EX II, GENOS L3000-e, L400II-e)
**Bar Feeders (5):** BF-01 to BF-05 (LNS Alpha 552, SL65 S, Quick Load Servo 80 S2, 80+, GT 342)
**Automation (1):** Robot Pallet Loader with FANUC robot

### Connection Protocols
- **Haas Machines:** Q-SETCONNECT (Port 5051)
- **Okuma Machines:** MTConnect (Port 5000)
- **Citizen Swiss:** Modbus TCP (Port 502)

### Employee System
- **22 Employees** across 9 departments
- **Departments:** Swiss, Turning, Milling, 5-Axis, Quality, Programming, Maintenance, Shipping, Admin
- **Clock-in:** PIN-based via RealTrac or Telegram bot
- **Telegram:** @IMSBot for notifications and remote clock-in

---

## QUICK COMMANDS

### PM2 Management
```bash
pm2 restart ims-api-production
pm2 logs ims-api-production --lines 50 --nostream
pm2 status
```

### Git Operations
```bash
git fetch origin
git pull origin main
git status
git log --oneline -10
gh pr create --base main --fill
```

### Database Queries
```bash
# Via Node.js script
node -e "import('./db/pool.js').then(({default: p}) => p.query('SELECT ...').then(console.log))"
```

### API Testing
```bash
curl -H "Authorization: Bearer $TOKEN" https://ims.machinistzen.com/api/v1/health
```

---

## PHILOSOPHY

> "Why would you choose to dream a broken dream? Make Logic. Sense."

### Core Principles
1. **Full Stack Ownership:** Every agent understands the complete system
2. **Persistent Memory:** All learnings documented and versioned
3. **Autonomous Resilience:** Systems self-heal and self-improve
4. **Zero Slop:** No dead code, no placeholders, no broken features
5. **Exponential Growth:** Each session builds on all previous sessions

### Dream State: "0" (Zero/Whole/True)
- Zero broken features
- Zero knowledge loss between sessions
- Zero time wasted on rediscovery
- Whole system understanding
- True manifestation of intentions

---

## CHANGELOG

### v1.0.0 (2026-02-05)
- Initial creation by Claude Opus 4.5
- Compiled from QWEN_LEARNING_FEEDBACK.md, AGENT_CAPABILITIES_MANIFEST, GITHUB_WORKFLOW_GUIDE
- Full project inventory across C:\inetpub\vhosts\
- System hardware specifications documented
- Multi-agent coordination patterns established

---

**END OF MASTER KNOWLEDGE**
**Mirror this file to: `{project}/httpdocs/docs/MASTER_KNOWLEDGE.md` for all projects**
